<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tricycle Franchise Application Form</title>
    <link rel="stylesheet" href="FranchiseForm.css">
    <link rel="icon" href="Pic/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/boxicons/css/boxicons.min.css">
    <script src="https://code.iconify.design/2/2.1.0/iconify.min.js"></script>
</head>
<body>
    <div class="sidebar">
        <img src="Pic/favicon.png" alt="Logo">
        <h2>Menu</h2>
        <ul>
            <li><a href="Dashboard.html"><i class="bx bxs-dashboard"></i></i> Dashboard</a></li>
            <li><a href="#"><i class="fas fa-chart-line"></i> Report</a></li>
            <li><a href="#"><i class="iconify" data-icon="mdi:card-account-details-outline"></i> Permit Form</a></li>
            <li><a href="#"><i class='bx bxs-file-find'></i> Verifying Documents</a></li>
            <li><a href="AdminOccuForm.html"><i class="fas fa-id-card icon"></i> Occupational Form</a></li>
            <li><a href="FranchiseForm.html"><i class="fas fa-id-card icon"></i> Franchise Form</a></li>
            <li><a href="#"><i class='bx bxs-wallet-alt'></i> Payment</a></li>
            <b>Others</b>
            <li><a href="#"><i class="fas fa-user"></i> Account</a></li>
            <li><a href="#"><i class="fas fa-cog"></i> Settings</a></li>
            <li><a href="#"><i class="fas fa-question-circle"></i> Help</a></li>
            <li><a href="login.html"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
        </ul>
    </div>

    <div class="main-content">
        <h1>Tricycle Franchise Application Form</h1>

        <form onsubmit="return confirmSubmission(event)" method="post" action="http://localhost:8000/submitForm" enctype="multipart/form-data">
            <div class="form-group">
                <div class="form-field">
                    <label for="applicationType" class="application-type-label">Application Type:</label>
                    <div class="radio-container">
                        <label for="newApplication">New</label>
                        <input type="radio" id="newApplication" name="applicationType" value="new" required>
                    </div>
                    <div class="radio-container">
                        <label for="renewalApplication">Renewal</label>
                        <input type="radio" id="renewalApplication" name="applicationType" value="renewal" required>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="form-field">
                    <label for="nameApplicant">Name of Applicant</label>
                    <input type="text" id="nameApplicant" name="nameApplicant" required>
                </div>
                <div class="form-field">
                    <label for="date">Date</label>
                    <input type="date" id="date" name="date" required>
                </div>
            </div>

            <div class="form-group">
                <div class="form-field">
                    <label for="route">Route</label>
                    <input type="text" id="route" name="route" required>
                </div>
            </div>

            <div class="form-group address-group">
                <div class="form-field address-field">
                    <label for="barangay">Barangay</label>
                    <input type="text" id="barangay" name="barangay" required>
                </div>
                <div class="form-field address-field">
                    <label for="municipality">Municipality</label>
                    <input type="text" id="municipality" name="municipality" required>
                </div>
                <div class="form-field address-field">
                    <label for="province">Province</label>
                    <input type="text" id="province" name="province" required>
                </div>
            </div>

            <div class="form-group">
                <div class="form-field">
                    <label for="occupation">Occupation</label>
                    <input type="text" id="occupation" name="occupation" required>
                </div>
            </div>

            <div class="form-group">
                <div class="form-field">
                    <label for="typeOwnership">Type of Ownership</label>
                    <select id="typeOwnership" name="typeOwnership" required>
                        <option value="single">Single Proprietorship</option>
                        <option value="cooperative">Cooperative</option>
                        <option value="corporation">Corporation</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <div class="form-field">
                    <label for="numUnits">Number of Units</label>
                    <input type="number" id="numUnits" name="numUnits" required>
                </div>
            </div>

            <div class="form-group">
                <div class="form-field">
                    <label for="unitDescription">Description of Ready Units</label>
                    <table class="unit-table" id="unitTable">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Model</th>
                                <th>Motor No.</th>
                                <th>Chassis No.</th>
                                <th>Plate No.</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="text" name="unitName[]" required></td>
                                <td><input type="text" name="unitModel[]" required></td>
                                <td><input type="text" name="unitMotorNo[]" required></td>
                                <td><input type="text" name="unitChassisNo[]" required></td>
                                <td><input type="text" name="unitPlateNo[]" required></td>
                            </tr>
                        </tbody>
                    </table>
                    <button type="button" class="add-unit-button" onclick="addUnitRow()">Add Unit</button>
                </div>
            </div>
            
            <script>
                function addUnitRow() {
                    const table = document.getElementById('unitTable').getElementsByTagName('tbody')[0];
                    const newRow = table.insertRow();
            
                    const nameCell = newRow.insertCell(0);
                    const modelCell = newRow.insertCell(1);
                    const motorNoCell = newRow.insertCell(2);
                    const chassisNoCell = newRow.insertCell(3);
                    const plateNoCell = newRow.insertCell(4);
            
                    nameCell.innerHTML = '<input type="text" name="unitName[]" required>';
                    modelCell.innerHTML = '<input type="text" name="unitModel[]" required>';
                    motorNoCell.innerHTML = '<input type="text" name="unitMotorNo[]" required>';
                    chassisNoCell.innerHTML = '<input type="text" name="unitChassisNo[]" required>';
                    plateNoCell.innerHTML = '<input type="text" name="unitPlateNo[]" required>';
                }
            </script>

            <div class="form-group">
                <div class="form-field">
                    <label for="officialDriver">Name of Official Driver</label>
                    <input type="text" id="officialDriver" name="officialDriver" required>
                </div>
                <div class="form-field">
                    <label for="licenseNumber">License Number</label>
                    <input type="text" id="licenseNumber" name="licenseNumber" required>
                </div>
            </div>

            <div class="form-group checkbox-container">
                <label for="consent" class="consent-text">
                    <input type="checkbox" id="consent" name="consent" required>
                    I hereby certify that all the information provided are true and correct based on personal knowledge of facts and further consent to the collection, use, and processing of my personal information by the Municipal Government of San Luis for the purpose of processing my Occupational Permit application. I understand my information may be shared with relevant authorities and service providers as necessary. I acknowledge my rights regarding my personal data as outlined by data privacy laws.
                </label>
            </div>

            <div class="form-group">
                <label for="certification">Certification</label>
                <p>
                    I hereby certify that all information given above, as well as the information-contained attachments on this application is true and correct. I also acknowledge that any misrepresentation on my part may be grounds for the disapproval of this application and/or revocation Provincial Authority that may be granted.
                </p>
                <p>
                    <strong>San Luis, Batangas dated</strong> <input type="text" id="certificationDate" name="certificationDate" value="Aug 20, 2024" readonly>
                </p>
                <p>
                    <strong>Signature of Applicant</strong> <input type="text" id="signatureApplicant" name="signatureApplicant" value="(signature image here)" readonly>
                </p>
            </div>
            
            <div class="form-group">
                <label for="subscribed">Subscribed and sworn to before me</label>
                <p>
                    This <input type="text" id="subscribedDate" name="subscribedDate" placeholder="Day" required> day of <input type="text" id="subscribedMonth" name="subscribedMonth" placeholder="Month" required>, <input type="text" id="subscribedYear" name="subscribedYear" placeholder="Year" required> at San Luis, Batangas.
                </p>
                <p>
                    He/She presented to me his/her Community Tax Certificate No. <input type="text" id="communityTaxCertNo" name="communityTaxCertNo" placeholder="Certificate No." required> issued at San Luis, Batangas on <input type="date" id="certificateIssueDate" name="certificateIssueDate" required>.
                </p>
                <p>
                    <strong>MA. ANN. DE GRACIA</strong><br>
                    Municipal Vice Mayor
                </p>
                <p>
                    <strong>Checked/Inspected/Issued By:</strong> <input type="text" id="inspectedBy" name="inspectedBy" placeholder="Name/Date" required>
                </p>
            </div>
            

            <div class="form-group">
                <button type="submit">Submit</button>
                <button type="button" class="clear-button" onclick="clearForm()">Clear Form</button>
            </div>
        </form>
    </div>

    <script>
        async function confirmSubmission(event) {
            event.preventDefault(); // Prevent the form from submitting immediately
            const confirmed = confirm("Are you sure you want to submit this form?");

            if (confirmed) {
                try {
                    const form = document.querySelector('form');
                    const formData = new FormData(form);

                    const response = await fetch(form.action, {
                        method: form.method,
                        body: formData,
                    });

                    if (response.ok) {
                        showAlert('Form submitted successfully!', 'success');
                    } else {
                        const errorData = await response.json();
                        showAlert(`Error: ${errorData.message}`, 'error');
                    }
                } catch (error) {
                    showAlert(`Submission failed: ${error.message}`, 'error');
                }
            }
        }

        function showAlert(message, type) {
            alert(message);  // Basic alert, replace with custom alert if needed
        }

        function clearForm() {
            const form = document.querySelector('form');
            form.reset();
        }
    </script>
</body>
</html>
